/* =========================
   TAROT MODAL (CORE)
   ========================= */

:root{
    --taro-gold: rgba(255, 215, 160, .85);
    --taro-gold-soft: rgba(255, 215, 160, .18);
    --taro-ink: rgba(255,255,255,.92);
    --taro-ink-dim: rgba(255,255,255,.74);
    --taro-panel: rgba(12, 12, 14, .78);
    --taro-border: rgba(255,255,255,.12);
}

.tarotModal{
    position: fixed !important;
    inset: 0 !important;
    display: none !important;

    align-items: center !important;
    justify-content: center !important;
    padding: 16px !important;

    background: rgba(0,0,0,.72) !important;
    backdrop-filter: blur(8px) !important;
    z-index: 999999 !important;
}

.tarotModal.isOpen{
    display: flex !important;
}

/* Вікно модалки */
.tarotCard{
    width: min(980px, 100%) !important;
    max-height: 86vh !important;
    overflow: auto !important;

    border-radius: 18px !important;
    border: 1px solid rgba(255, 215, 160, .12) !important;

    background:
            radial-gradient(1200px 600px at 50% 0%, rgba(255,215,160,.06), transparent 55%),
            var(--taro-panel) !important;

    box-shadow: 0 20px 80px rgba(0,0,0,.60) !important;

    padding: 18px !important;
    color: var(--taro-ink) !important;
}

/* =========================
   HEADER
   ========================= */

.tarotHeader{
    text-align: center !important;
    padding: 6px 6px 12px;
    border-bottom: 1px solid rgba(255,255,255,.10);
    margin-bottom: 14px;
}

.tarotHeader h2{
    margin: 0;
    font-family: "Cinzel", serif !important;
    letter-spacing: .22em !important;
    font-weight: 700 !important;
    color: var(--taro-gold) !important;
    text-shadow: 0 0 18px rgba(255, 215, 160, .10);
}

.tarotHeader p{
    margin: 8px 0 0;
    font-family: "EB Garamond", serif !important;
    font-style: italic;
    color: var(--taro-ink-dim) !important;
}

/* =========================
   SECTIONS (toggle)
   ========================= */

#tarotSelection{ display: none !important; }
#tarotSelection.isOpen{ display: block !important; }

#tarotReading{ display: none !important; }
#tarotReading.isOpen{ display: block !important; }

/* =========================
   SPREAD OPTIONS
   ========================= */

.tarotSpreads{
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 12px;
    margin-top: 10px;
}

@media (max-width: 820px){
    .tarotSpreads{ grid-template-columns: 1fr; }
}

.spreadOption{
    padding: 14px;
    border-radius: 16px;
    cursor: pointer;

    border: 1px solid rgba(255,255,255,.12);
    background:
            linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)) !important;

    box-shadow: 0 10px 30px rgba(0,0,0,.25);
}

.spreadOption h3{
    margin: 0 0 6px;
    font-family: "Cinzel", serif !important;
    letter-spacing: .06em;
    color: var(--taro-gold) !important;
}

.spreadOption p{
    margin: 0;
    font-family: "EB Garamond", serif !important;
    color: var(--taro-ink-dim);
}

.spreadOption.active{
    border-color: rgba(255, 215, 160, .55) !important;
    box-shadow:
            0 0 0 2px rgba(255, 215, 160, .14) inset,
            0 12px 40px rgba(0,0,0,.34);
    background:
            radial-gradient(500px 200px at 50% 0%, rgba(255,215,160,.12), transparent 60%),
            linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03)) !important;
}

/* =========================
   BUTTONS
   ========================= */

.tarotStart,
.tarotClose{
    width: 100%;
    margin-top: 12px;
    padding: 12px 14px;
    border-radius: 16px;
    cursor: pointer;
}

.tarotStart{
    font-family: "Cinzel", serif !important;
    letter-spacing: .12em;
    font-weight: 700;

    background: rgba(255,255,255,.10) !important;
    color: rgba(255,255,255,.92) !important;
    border: 1px solid rgba(255, 215, 160, .35) !important;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

.tarotStart:disabled{
    opacity: .38 !important;
    cursor: not-allowed;
    border-color: rgba(255,255,255,.10) !important;
}

.tarotClose{
    font-family: "EB Garamond", serif !important;
    font-size: 16px;
    letter-spacing: .02em;

    background: transparent;
    color: rgba(255,255,255,.85);
    border: 1px solid rgba(255, 215, 160, .28) !important;
}

/* =========================
   CARDS (GRID + SIZE)
   ========================= */

/* контейнер з картами */
#tarotCardsDisplay{
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 14px;
    justify-items: center;
    padding-top: 8px;
}

/* обгортка карти */
.cardSlot{
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* розмір саме КАРТ (не чіпаємо .tarotCard бо це модалка!) */
.tarotCardFlip{
    width: 140px;
}

/* картинка */
.tarotCardFlip img{
    width: 100%;
    height: auto;
    border-radius: 10px;
    display: block;
}

/* мобільна оптимізація */
@media (max-width: 480px){
    .tarotCardFlip{ width: 110px; }
    #tarotCardsDisplay{ gap: 10px; }
}

/* =========================
   CAPTIONS under cards
   ========================= */

.cardLabel{
    width: 100%;
    text-align: center !important;
    margin-top: 8px;
    font-family: "EB Garamond", serif !important;
    font-size: 16px;
    color: rgba(255,215,160,.92);
}

/* якщо tarot.js вставляє позиції як окремий елемент */
.cardPosition,
.position{
    display: block;
    width: 100%;
    text-align: center !important;
    margin-top: 2px;

    font-family: "EB Garamond", serif !important;
    font-size: 14px;
    font-style: italic;
    color: rgba(255,215,160,.70);
}

/* на дуже малих — ховаємо позицію, лишаємо назву */
@media (max-width: 360px){
    .cardPosition,
    .position{
        display: none;
    }
}

/* =========================
   INTERPRETATION
   ========================= */

.tarotInterpretation{
    margin-top: 18px !important;
    padding-top: 18px !important;
    border-top: 1px solid rgba(255, 215, 160, .16) !important;
}

.tarotInterpretation h3{
    font-family: "Cinzel", serif !important;
    letter-spacing: .18em !important;
    color: var(--taro-gold) !important;
    margin: 0 0 12px !important;
    text-align: center;
}

#tarotInterpretationContent{
    display: grid !important;
    gap: 14px !important;
}

/* універсальний стиль під те, що генерує tarot.js */
#tarotInterpretationContent .cardMeaning,
#tarotInterpretationContent .meaning,
#tarotInterpretationContent .interpretationItem{
    position: relative;
    padding: 14px 14px 14px 18px;
    border-radius: 14px;
    background: rgba(255,255,255,.04);
    border: 1px solid rgba(255,255,255,.10);
    box-shadow: 0 10px 30px rgba(0,0,0,.26);
}

/* “золота дужка” зліва */
#tarotInterpretationContent .cardMeaning::before,
#tarotInterpretationContent .meaning::before,
#tarotInterpretationContent .interpretationItem::before{
    content: "";
    position: absolute;
    left: 10px;
    top: 16px;
    bottom: 16px;
    width: 2px;
    border-radius: 2px;
    background: linear-gradient(
            180deg,
            rgba(255,215,160,.00),
            rgba(255,215,160,.55),
            rgba(255,215,160,.00)
    );
}

/* заголовок карти в тлумаченні */
#tarotInterpretationContent h4,
#tarotInterpretationContent .title,
#tarotInterpretationContent .cardTitle{
    margin: 0 0 6px;
    font-family: "Playfair Display", serif !important;
    font-weight: 600;
    font-size: 20px;
    color: rgba(255,215,160,.92);
}

/* позиція в тлумаченні */
#tarotInterpretationContent .position,
#tarotInterpretationContent .pos{
    display: block;
    margin: 0 0 8px;
    font-family: "EB Garamond", serif !important;
    font-style: italic;
    color: rgba(255,215,160,.70);
    opacity: .95;
}

/* текст */
#tarotInterpretationContent p,
#tarotInterpretationContent .text{
    margin: 0;
    font-family: "EB Garamond", serif !important;
    font-size: 18px;
    line-height: 1.55;
    color: rgba(255,255,255,.88);
}

/* “Нове гадання” з відступом */
#tarotNewBtn{
    margin-top: 18px !important;
}

/* =========================
   CELTIC CROSS (CSS part)
   Працює якщо JS додає клас cardsCelticCross
   і pos-1..pos-10 на .cardSlot
   ========================= */

.cardsCelticCross{
    display: grid !important;
    gap: 14px;
    justify-items: center;
    align-items: start;

    grid-template-columns: repeat(6, minmax(0, 1fr));
    grid-template-rows: repeat(5, auto);
}

.cardsCelticCross .pos-1{ grid-column: 3; grid-row: 3; }
.cardsCelticCross .pos-2{ grid-column: 3; grid-row: 3; z-index: 2; }

.cardsCelticCross .pos-3{ grid-column: 3; grid-row: 1; }
.cardsCelticCross .pos-4{ grid-column: 3; grid-row: 5; }

.cardsCelticCross .pos-5{ grid-column: 1; grid-row: 3; }
.cardsCelticCross .pos-6{ grid-column: 5; grid-row: 3; }

.cardsCelticCross .pos-7{  grid-column: 6; grid-row: 1; }
.cardsCelticCross .pos-8{  grid-column: 6; grid-row: 2; }
.cardsCelticCross .pos-9{  grid-column: 6; grid-row: 3; }
.cardsCelticCross .pos-10{ grid-column: 6; grid-row: 4; }

/* 2-га карта поперек: JS має додати crossRotate на .tarotCardFlip */
.tarotCardFlip.crossRotate{
    transform: rotate(90deg);
}

/* мобільний fallback: нормальна сітка */
@media (max-width: 680px){
    .cardsCelticCross{
        grid-template-columns: repeat(2, minmax(0,1fr));
        grid-template-rows: auto;
    }
    .cardsCelticCross .cardSlot{
        grid-column: auto !important;
        grid-row: auto !important;
    }
    .tarotCardFlip.crossRotate{
        transform: rotate(0deg);
    }
}

/* =========================================================
   ФІКСИ ТА ПОКРАЩЕННЯ (підписи + центрування тлумачення)
   ========================================================= */

/* Підписи під картами: обмеження ширини + перенос + максимум 2 рядки */
.cardLabel{
    max-width: 140px;
    line-height: 1.15;
    white-space: normal;
    word-break: break-word;

    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2; /* максимум 2 рядки */
    overflow: hidden;
}

/* У кельтському хресті центр має 2 карти в одному місці —
   розносимо підписи, щоб не налазили */
.cardsCelticCross .pos-1 .cardLabel{
    margin-top: 10px;
}
.cardsCelticCross .pos-2 .cardLabel{
    margin-top: 28px;
    opacity: .92;
}

/* Стабілізуємо центр (щоб підписи не “стриба-ли”) */
.cardsCelticCross .pos-1,
.cardsCelticCross .pos-2{
    align-items: center;
}

/* Тлумачення: увесь текст по центру */
#tarotInterpretationContent .cardMeaning{
    text-align: center;
}
#tarotInterpretationContent .cardMeaning h4{
    text-align: center;
}
#tarotInterpretationContent .cardMeaning .position{
    text-align: center;
}
#tarotInterpretationContent .cardMeaning p{
    text-align: center;
}

/* =========================
   ANIMATION: викладання + перевертання
   ========================= */

/* Плавна поява кожного слота */
.cardSlot{
    opacity: 0;
    transform: translateY(14px) scale(.98);
    animation: tarotDealIn 520ms ease forwards;
    /* Затримку ти вже ставиш через slot.style.animationDelay в JS */
}

/* Кадри анімації “викладання” */
@keyframes tarotDealIn{
    to{
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* 3D-перевертання */
.tarotCardFlip{
    position: relative;
    transform-style: preserve-3d;
    perspective: 1000px;

    /* Плавний flip */
    transition: transform 760ms cubic-bezier(.2,.9,.2,1);
    will-change: transform;
}

/* Перед/зад */
.cardFace{
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

.cardFront{
    transform: rotateY(180deg);
}

/* Стан після перевертання */
.tarotCardFlip.flipped{
    transform: rotateY(180deg);
}

/* Трохи “смаку” — мікросвітіння на відкритті */
.tarotCardFlip.flipped img{
    filter: saturate(1.02) contrast(1.02);
}

/* 2-га карта (перехресна) — вона вже має rotate(90deg),
   тому додаємо flip поверх цього повороту */
.tarotCardFlip.crossRotate{
    transform: rotate(90deg);
}

.tarotCardFlip.crossRotate.flipped{
    transform: rotate(90deg) rotateY(180deg);
}

/* =========================
   RESTART BETWEEN CARDS & INTERPRETATION
   ========================= */

.tarotRestartWrap{
    display: flex;
    justify-content: center;
    margin: 18px 0 8px;
}

.tarotRestart{
    font-family: "Cinzel", serif;
    letter-spacing: .14em;
    font-size: 14px;

    padding: 10px 22px;
    border-radius: 999px;

    background: transparent;
    color: rgba(255,215,160,.85);

    border: 1px solid rgba(255,215,160,.35);
    cursor: pointer;

    box-shadow:
            0 0 0 0 rgba(255,215,160,.0),
            0 8px 24px rgba(0,0,0,.35);

    transition:
            transform .25s ease,
            box-shadow .25s ease,
            background .25s ease;
}

.tarotRestart:hover{
    background: rgba(255,215,160,.06);
    box-shadow:
            0 0 0 2px rgba(255,215,160,.14),
            0 12px 32px rgba(0,0,0,.45);
    transform: translateY(-1px);
}

.tarotRestart:active{
    transform: translateY(0);
    box-shadow:
            0 0 0 2px rgba(255,215,160,.22) inset;
}
